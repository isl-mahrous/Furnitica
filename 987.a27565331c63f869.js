"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[987],{5987:(P,k,o)=>{o.r(k),o.d(k,{BasketModule:()=>Z});var u=o(9808),v=o(5963),h=o(4825),l=o(3900),y=o(8306);class b{constructor(a,t,r,i,c,m,s){this.id=a,this.productName=t,this.price=r,this.quantity=i,this.pictureUrl=c,this.brand=m,this.type=s}}var e=o(5e3),B=o(9972);function f(n,a){1&n&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"There are no items in your basket"),e.qZA()())}function C(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"app-basket-summary",6),e.NdJ("decrement",function(i){return e.CHM(t),e.oxw().decrementItemQuantity(i)})("increment",function(i){return e.CHM(t),e.oxw().incrementItemQuantity(i)})("remove",function(i){return e.CHM(t),e.oxw().removeBasketItem(i)}),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",7),e._UZ(8,"app-order-totals"),e.TgZ(9,"a",8),e._uU(10," Proceed to checkout "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("basketProducts",t.basketProducts)}}let p=(()=>{class n{constructor(t){this.basketService=t,this.basketProducts=[],this.basket$=this.basketService.basket$}ngOnInit(){(0,v.H)(2e3).pipe((0,h.g)(1e3),(0,l.w)(()=>this.basket$),(0,l.w)(t=>this.basketService.getBasketProducts(null==t?void 0:t.id)),(0,l.w)(t=>this.createBasketViewModel(t,this.basketService.getCurrentBasketValue()))).subscribe(t=>{t&&(this.basketProducts=t)})}removeBasketItem(t){this.basketService.removeItemFromBasket(t)}incrementItemQuantity(t){this.basketService.incrementItemQuantity(t)}decrementItemQuantity(t){this.basketService.decrementItemQuantity(t)}createBasketViewModel(t,r){if(t){let i,c,m=[];for(let s=0;s<t.length;s++){i=t[s],c=r.basketItems[s];let S=new b(t[s].id,t[s].name,t[s].price,r.basketItems[s].quantity,t[s].pictures[0],t[s].productBrand,t[s].productType);m.push(S)}return new y.y(s=>{s.next(m),s.complete()})}return null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(B.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-basket"]],decls:5,vars:6,consts:[[1,"container","mt-2"],[4,"ngIf"],[1,"pb-5"],[1,"container"],[1,"row"],[1,"col-12","py-5","mb-1"],[3,"basketProducts","decrement","increment","remove"],[1,"col-6","offset-6"],["routerLink","/checkout",1,"btn","btn-outline-primary","py-2","btn-block"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,f,3,0,"div",1),e.ALo(2,"async"),e.YNc(3,C,11,1,"div",1),e.ALo(4,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null===e.lcZ(2,2,r.basket$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,r.basket$)))},styles:[""]}),n})();var d=o(6157);const g=[{path:"",component:p}];let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(g)],d.Bz]}),n})();var x=o(4466),M=o(8795),T=o(9281);let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,I,x.m]]}),n})();e.B6R(p,[u.O5,M.b,T.S,d.yS],[u.Ov])}}]);